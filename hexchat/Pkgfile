# Description: GTK+ based IRC client
# URL:         https://hexchat.github.io/
# Maintainer:  Alexandr Savca, alexandrsavca89 at gmail dot com
# Depends on:  dbus-glib desktop-file-utils enchant iso-codes libcanberra libnotify libproxy libtool lua pciutils
# Optional:    dbus-glib desktop-file-utils enchant libcanberra libnotify libproxy lua pciutils

name=hexchat
version=2.14.3
release=3
source=(https://dl.hexchat.net/hexchat/$name-$version.tar.xz
	remove-fancy-font-decoration-menu.c.patch)

build() {
	cd $name-$version

	patch -d src/fe-gtk -i $SRC/remove-fancy-font-decoration-menu.c.patch

	meson build \
		--prefix=/usr           \
		--buildtype=plain       \
		-Dwith-lua=lua          \
		-Dwith-libproxy=true    \
		-Dwith-libnotify=true   \
		-Dwith-libcanberra=true \
		-Dwith-dbus=true        \
		-Dwith-sysinfo=false    \
		-Dwith-text=false

	ninja -C build -j ${JOBS:-1} -v
	DESTDIR="$PKG" ninja -C build install

	rm -r $PKG/usr/share/locale
}
