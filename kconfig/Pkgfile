# Description: Framework for reading and writing configuration
# URL:         https://www.kde.org/
# Maintainer:  Stamatin Cristina, dear dot volgk at gmail dot com
# Depends on:  icu qt5 zstd

name=kconfig
version=5.75.0
release=3
source=(https://download.kde.org/stable/frameworks/${version%.*}/$name-$version.tar.xz)

build() {
	cd $name-$version

	# Remove all translations
	rm -r po/*

	mkdir build
	cd build

	cmake ..                                               \
		-DCMAKE_BUILD_TYPE=RELEASE                     \
		-DCMAKE_C_FLAGS_RELEASE="$CFLAGS -DNDEBUG"     \
		-DCMAKE_CXX_FLAGS_RELEASE="$CXXFLAGS -DNDEBUG" \
		-DCMAKE_INSTALL_PREFIX=/usr                    \
		-DCMAKE_INSTALL_LIBEXECDIR=/usr/lib/kf5        \
		-DBUILD_TESTING=OFF                            \
		-Wno-dev

	make VERBOSE=1
	make DESTDIR=$PKG install
}
