# Description: Recover LEAP/PPTP passwords
# URL:         https://www.willhackforsushi.com/?page_id=41
# Maintainer:  Stamatin Cristina, dear dot volgk at gmail dot com
# Depends on:  libpcap libxcrypt

name=asleap
version=2.2
release=3
source=(http://www.willhackforsushi.com/code/$name/$version/$name-$version.tgz
	0001-fix-build-for-CRUX.patch
	001_add_simple_password_bruteforcing_option.patch
	002_added_the_possibility_to_verify_MSCHAP-V2_authentication.patch
	003_fix_and_improve_bruteforce_option.patch)
build() {
	cd $name-$version

	patch -p1 < $SRC/0001-fix-build-for-CRUX.patch
	patch -p1 < $SRC/001_add_simple_password_bruteforcing_option.patch
	patch -p1 < $SRC/002_added_the_possibility_to_verify_MSCHAP-V2_authentication.patch
	patch -p1 < $SRC/003_fix_and_improve_bruteforce_option.patch
	sed -i  -e "s/#define VER \"\(.*\)\"/#define VER \"${version}\"/" \
		version.h

	make
		
	install -D asleap  $PKG/usr/bin/asleap
	install -D genkeys $PKG/usr/bin/genkeys
}
