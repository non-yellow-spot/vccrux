# grep resume partition from /etc/default/grub if exists
if [ -f /etc/default/grub ]; then
	resume=$(grep -Po '(?<=resume=).*(?=[" ])' /etc/default/grub)
fi

if [ -n $resume ]; then
	resume=" --add-device $resume "
fi

# grep version from package
version=$(pkginfo -i | awk '/^linux-zen /{print $2}')

dracut -q --kver $version $resume /boot/initramfs-$version.img
grub-mkconfig -o /boot/grub/grub.cfg
